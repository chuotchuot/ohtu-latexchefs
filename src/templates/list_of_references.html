<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/list_of_references.css') }}">
</head>

{% extends "layout.html" %}

{% block title %}
List of references | References
{% endblock %}

{% block body %}

<h2>List of references</h2>

{% if references %}
<span id="references">
{% for i in references %}
    <!-- Placeholder starts here -->
    
        {% if toggle == "on" %}
        <!-- Copy button code from here -->
        <div id="bibtex-{{ i.id }}">
            <!-- to here -->
        <pre>{{i}}</pre> <br>
        <!-- Copy button code from here -->
    </div>
    <br/>
    <button onclick="copyToClipboard('bibtex-{{ i.id }}')">Copy text</button>
    <script>
        function copyToClipboard(elementId) {
            var copyText = document.getElementById(elementId).innerText;
            navigator.clipboard.writeText(copyText);
            alert("Copied the text:\n" + copyText)
        }
    </script>
    <!-- to here -->
{% else %}
        {% else %}
        <div class="reference">
            {{i.title}}, {{i.author}}, {{i.year}}, {{i.publisher}}
        {% endif %}
        <form action="/edit" method="POST">
            <input type="hidden" name="id" value="{{i.id}}">
            <input type="hidden" name="confirmed" value="0">
            <input type="submit" class="button" title="Edit" value="Edit">
        </form>
        <form action="/delete" method="POST">
            <input type="hidden" name="id" value="{{i.id}}">
            <input type="hidden" name="confirmed" value="0">
            <input type="submit" class="delete button" title="Delete" value="Delete">
        </form>
        <!-- Placeholder ends here -->
    </div>
    <br>
{% endfor %}
</span>
{% else %}
<p>No references found</p>
{% endif %}

<p>
    <a href="/" class="button home">Go to front page</a>
</p>
<form action="/list_of_references" method="POST">
    {% if toggle == "on" %}
    <input type="hidden" name="state" value="off">
    {% else %}
    <input type="hidden" name="state" value="on">
    {% endif %}
    <input type="submit" class="button" value="Toggle BibTeX format">
</form>
{% endblock %}
